<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Insourcia.Psychotherapy.Model.Cluster>>" %>

<%@ Import Namespace="Insourcia.Psychotherapy.Model" %>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Mood Flowchart
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <% IList<ProcessGuide> processGuideList = ViewData["processGuideList"] as IList<ProcessGuide>;
       IList<Cluster> clusterList = ViewData["clusterList"] as IList<Cluster>;
       Cluster cluster37 = clusterList.Where(c => c.ClusterID == 37).First();
       Cluster cluster6 = clusterList.Where(c => c.ClusterID == 6).First();
       ProcessGuide processGuide10 = processGuideList.Where(u => u.ProcessGuideID == 10).First();
       ProcessGuide processGuide11 = processGuideList.Where(u => u.ProcessGuideID == 11).First();
       ProcessGuide processGuide12 = processGuideList.Where(u => u.ProcessGuideID == 12).First();
       ProcessGuide processGuide13 = processGuideList.Where(u => u.ProcessGuideID == 13).First();
       ProcessGuide processGuide14 = processGuideList.Where(u => u.ProcessGuideID == 14).First();
       ProcessGuide processGuide15 = processGuideList.Where(u => u.ProcessGuideID == 15).First();
       ProcessGuide processGuide16 = processGuideList.Where(u => u.ProcessGuideID == 16).First();
       ProcessGuide processGuide17 = processGuideList.Where(u => u.ProcessGuideID == 17).First();
       ProcessGuide processGuide18 = processGuideList.Where(u => u.ProcessGuideID == 18).First();
       ProcessGuide processGuide20 = processGuideList.Where(u => u.ProcessGuideID == 20).First();
       ProcessGuide processGuide21 = processGuideList.Where(u => u.ProcessGuideID == 21).First();
       ProcessGuide processGuide22 = processGuideList.Where(u => u.ProcessGuideID == 22).First();
       ProcessGuide processGuide23 = processGuideList.Where(u => u.ProcessGuideID == 23).First();
       ProcessGuide processGuide24 = processGuideList.Where(u => u.ProcessGuideID == 24).First();
       ProcessGuide processGuide25 = processGuideList.Where(u => u.ProcessGuideID == 25).First();
       ProcessGuide processGuide26 = processGuideList.Where(u => u.ProcessGuideID == 26).First();
       ProcessGuide processGuide28 = processGuideList.Where(u => u.ProcessGuideID == 28).First();
    %>
    <div id="list" style="height: 1000px;">
        <div class="diagram">
            <div class="mood_line">
                <!--<div class="mood_title">DEPRESSED,ELEVATED,EXPANSIVE OR IRRITABLE MOOD</div>-->
            </div>
            <div class="left_line lfloat">
                <div class="white_box lfloat" id="processGuide_11_white">
                    <div class="wtopbox">
                        <div class="wlt">
                        </div>
                        <div class="wrt">
                        </div>
                    </div>
                    <div class="wcenterbox">
                        <div class="wlline">
                        </div>
                        <div class="wwordbox">
                            <a href="javascript:void(0)" onclick="warn()" id="processGuide_11_whitea">
                                <%:processGuide11 == null ? "null" : processGuide11.Title%></a></div>
                        <div class="wrline">
                        </div>
                    </div>
                    <div class="wbottombox">
                        <div class="wlb">
                        </div>
                        <div class="wrb">
                        </div>
                    </div>
                </div>
                <div class="clear">
                </div>
                <div class="gdarrow_anxiety key">
                </div>
                <div class="white_box lfloat" id="processGuide_10_white">
                    <div class="wtopbox">
                        <div class="wlt">
                        </div>
                        <div class="wrt">
                        </div>
                    </div>
                    <div class="wcenterbox">
                        <div class="wlline hchange3">
                        </div>
                        <div class="wwordbox">
                            <a href="javaScript: void(0);" onclick="shownext('processGuide_10_white','processGuide_14_white','/FlowChart/ProcessGuide','yes')"
                                id="processGuide_10_whitea">
                                <%:processGuide10 == null ? "null" : processGuide10.Title%></a></div>
                        <div class="wrline hchange3">
                        </div>
                    </div>
                    <div class="wbottombox">
                        <div class="wlb">
                        </div>
                        <div class="wrb">
                        </div>
                    </div>
                </div>
                <div class="clear">
                </div>
                <div class="gdarrow_anxiety key">
                </div>
                <div class="white_box lfloat" id="processGuide_12_white">
                    <div class="wtopbox">
                        <div class="wlt">
                        </div>
                        <div class="wrt">
                        </div>
                    </div>
                    <div class="wcenterbox">
                        <div class="wlline">
                        </div>
                        <div class="wwordbox">
                            <a href="javaScript: void(0);" onclick="warn()" id="processGuide_12_whitea">
                                <%:processGuide12 == null ? "null" : processGuide12.Title%></a></div>
                        <div class="wrline">
                        </div>
                    </div>
                    <div class="wbottombox">
                        <div class="wlb">
                        </div>
                        <div class="wrb">
                        </div>
                    </div>
                </div>
                <div class="clear">
                </div>
                <div class="gdlarrow_anxiety key">
                </div>
                <div class="white_box lfloat" id="processGuide_13_white">
                    <div class="wtopbox">
                        <div class="wlt">
                        </div>
                        <div class="wrt">
                        </div>
                    </div>
                    <div class="wcenterbox">
                        <div class="wlline hchange2">
                        </div>
                        <div class="wwordbox">
                            <a href="javaScript: void(0);" onclick="warn()" id="processGuide_13_whitea">
                                <%:processGuide13 == null ? "null" : processGuide13.Title%></a></div>
                        <div class="wrline hchange2">
                        </div>
                    </div>
                    <div class="wbottombox">
                        <div class="wlb">
                        </div>
                        <div class="wrb">
                        </div>
                    </div>
                </div>
                <div class="rndtarrow_mood">
                </div>
                <div class="clear">
                </div>
                <div class="gdlsarrow_mood key">
                </div>
                <div class="white_box lfloat" id="cluster_6_white">
                    <div class="wtopbox">
                        <div class="wlt">
                        </div>
                        <div class="wrt">
                        </div>
                    </div>
                    <div class="wcenterbox">
                        <div class="wlline change">
                        </div>
                        <div class="wwordbox">
                            <a href="javaScript: void(0);" onclick="warn()" id="cluster_6_whitea">
                                <%:cluster6 == null ? "null" : cluster6.Title%>
                            </a>
                        </div>
                        <div class="wrline change">
                        </div>
                    </div>
                    <div class="wbottombox">
                        <div class="wlb">
                        </div>
                        <div class="wrb">
                        </div>
                    </div>
                </div>
            </div>
            <div class="right_line lfloat">
                <div class="right_line_top">
                    <div class="rndlarrow_mood">
                    </div>
                    <div class="rtarrow_mood lfloat">
                    </div>
                    <div class="clear">
                    </div>
                    <div class="white_box lfloat wchange key2" id="processGuide_14_white">
                        <div class="wtopbox wchange">
                            <div class="wlt">
                            </div>
                            <div class="wrt">
                            </div>
                        </div>
                        <div class="wcenterbox wchange">
                            <div class="wlline hchange4">
                            </div>
                            <div class="wwordbox">
                                <a href="javaScript: void(0);" onclick="shownext('processGuide_14_white','processGuide_10_white','/FlowChart/ProcessGuide','no')"
                                    id="processGuide_14_whitea">
                                    <%:processGuide14 == null ? "null" : processGuide14.Title%></a></div>
                            <div class="wrline hchange4">
                            </div>
                        </div>
                        <div class="wbottombox wchange">
                            <div class="wlb">
                            </div>
                            <div class="wrb">
                            </div>
                        </div>
                    </div>
                    <div class="rrtmarrow_arrow">
                    </div>
                    <div class="arrow_line lfloat">
                        <div class="gyrlarrow_anxiety lfloat">
                        </div>
                        <div class="clear">
                        </div>
                        <div class="gdyarrow_mood rfloat">
                        </div>
                    </div>
                    <div class="white_box lfloat" id="processGuide_20_white">
                        <div class="wtopbox">
                            <div class="wlt">
                            </div>
                            <div class="wrt">
                            </div>
                        </div>
                        <div class="wcenterbox">
                            <div class="wlline">
                            </div>
                            <div class="wwordbox">
                                <a href="javaScript: void(0);" onclick="warn()" id="processGuide_20_whitea">
                                    <%:processGuide20 == null ? "null" : processGuide20.Title%></a></div>
                            <div class="wrline">
                            </div>
                        </div>
                        <div class="wbottombox">
                            <div class="wlb">
                            </div>
                            <div class="wrb">
                            </div>
                        </div>
                    </div>
                    <div class="rndarrow_anxiety lfloat">
                    </div>
                    <div class="white_box rfloat key2" id="processGuide_22_white">
                        <div class="wtopbox">
                            <div class="wlt">
                            </div>
                            <div class="wrt">
                            </div>
                        </div>
                        <div class="wcenterbox">
                            <div class="wlline hchange">
                            </div>
                            <div class="wwordbox">
                                <a href="javaScript: void(0);" onclick="warn()" id="processGuide_22_whitea">
                                    <%:processGuide22 == null ? "null" : processGuide22.Title%></a></div>
                            <div class="wrline hchange">
                            </div>
                        </div>
                        <div class="wbottombox">
                            <div class="wlb">
                            </div>
                            <div class="wrb">
                            </div>
                        </div>
                    </div>
                    <div class="white_box rfloat" id="processGuide_21_white">
                        <div class="wtopbox">
                            <div class="wlt">
                            </div>
                            <div class="wrt">
                            </div>
                        </div>
                        <div class="wcenterbox">
                            <div class="wlline">
                            </div>
                            <div class="wwordbox">
                                <a href="javaScript: void(0);" onclick="warn()" id="processGuide_21_whitea">
                                    <%:processGuide21 == null ? "null" : processGuide21.Title%>
                                </a>
                            </div>
                            <div class="wrline">
                            </div>
                        </div>
                        <div class="wbottombox">
                            <div class="wlb">
                            </div>
                            <div class="wrb">
                            </div>
                        </div>
                    </div>
                    <div class="clear">
                    </div>
                    <div class="rntarrow_mood rfloat">
                    </div>
                    <div class="gclarrow_mood rfloat">
                    </div>
                </div>
                <div class="right_line_bottom">
                    <div class="bottom_left_line lfloat">
                        <div class="rnrarrow_mood lfloat key3">
                        </div>
                        <div class="white_box lfloat" id="processGuide_15_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline change">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="processGuide_15_whitea">
                                        <%:processGuide15 == null ? "null" : processGuide15.Title%></a></div>
                                <div class="wrline change">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                        <div class="gclsarrow_anxiety lfloat key4">
                        </div>
                        <div class="white_box lfloat" id="processGuide_16_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="processGuide_16_whitea">
                                        <%:processGuide16 == null ? "null" : processGuide16.Title%>
                                    </a>
                                </div>
                                <div class="wrline">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                        <div class="clear">
                        </div>
                        <div class="gydarrow_sud rfloat key5">
                        </div>
                        <div class="clear">
                        </div>
                        <div class="white_box rfloat" id="processGuide_28_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="processGuide_28_whitea">
                                        <%:processGuide28 == null ? "null" : processGuide28.Title%>
                                    </a>
                                </div>
                                <div class="wrline">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                        <div class="clear">
                        </div>
                        <div class="short_left_line lfloat">
                            <div class="rdarrow rfloat key6">
                            </div>
                            <div class="clear">
                            </div>
                            <div class="gycsarrow_mood lfloat key9">
                            </div>
                            <div class="white_box lfloat" id="processGuide_18_white">
                                <div class="wtopbox">
                                    <div class="wlt">
                                    </div>
                                    <div class="wrt">
                                    </div>
                                </div>
                                <div class="wcenterbox">
                                    <div class="wlline hchange2">
                                    </div>
                                    <div class="wwordbox">
                                        <a href="javaScript: void(0);" onclick="warn()" id="processGuide_18_whitea">
                                            <%:processGuide18 == null ? "null" : processGuide18.Title%></a></div>
                                    <div class="wrline hchange2">
                                    </div>
                                </div>
                                <div class="wbottombox">
                                    <div class="wlb">
                                    </div>
                                    <div class="wrb">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="gydlarrow_anxiety rfloat key7">
                        </div>
                        <div class="clear">
                        </div>
                        <div class="white_box lfloat key11" id="cluster_37_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline change">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="cluster_37_whitea">
                                        <%:cluster37 == null ? "null" : cluster37.Title%>
                                    </a>
                                </div>
                                <div class="wrline change">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                        <div class="white_box rfloat" id="processGuide_26_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline change">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="processGuide_26_whitea">
                                        <%:processGuide26 == null ? "null" : processGuide26.Title%></a></div>
                                <div class="wrline change">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bottom_right_line lfloat">
                        <div class="rnrsarrow_anxiety lfloat key3">
                        </div>
                        <div class="white_box lfloat" id="processGuide_23_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline hchange2">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="processGuide_23_whitea">
                                        <%:processGuide23 == null ? "null" : processGuide23.Title%>
                                    </a>
                                </div>
                                <div class="wrline hchange2">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                        <div class="clear">
                        </div>
                        <div class="gydarrow_sud lfloat key8">
                        </div>
                        <div class="clear">
                        </div>
                        <div class="space lfloat">
                        </div>
                        <div class="white_box lfloat" id="processGuide_17_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="processGuide_17_whitea">
                                        <%:processGuide17 == null ? "null" : processGuide17.Title%></a></div>
                                <div class="wrline">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                        <div class="clear">
                        </div>
                        <div class="gydlarrow_anxiety lfloat key8">
                        </div>
                        <div class="right_side_line lfloat">
                            <div class="rdarrow lfloat key10">
                            </div>
                            <div class="clear">
                            </div>
                            <div class="white_box lfloat" id="processGuide_24_white" style="font-weight: bold;">
                                <div class="wtopbox">
                                    <div class="wlt">
                                    </div>
                                    <div class="wrt">
                                    </div>
                                </div>
                                <div class="wcenterbox">
                                    <div class="wlline change">
                                    </div>
                                    <div class="wwordbox">
                                        <a href="javaScript: void(0);" onclick="warn()" id="processGuide_24_whitea" style="color: Blue">
                                            <%:processGuide24 == null ? "null" : processGuide24.Title%></a></div>
                                    <div class="wrline change">
                                    </div>
                                </div>
                                <div class="wbottombox">
                                    <div class="wlb">
                                    </div>
                                    <div class="wrb">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="clear">
                        </div>
                        <div class="white_box lfloat key2" id="processGuide_25_white">
                            <div class="wtopbox">
                                <div class="wlt">
                                </div>
                                <div class="wrt">
                                </div>
                            </div>
                            <div class="wcenterbox">
                                <div class="wlline change">
                                </div>
                                <div class="wwordbox">
                                    <a href="javaScript: void(0);" onclick="warn()" id="processGuide_25_whitea">
                                        <%:processGuide25 == null ? "null" : processGuide25.Title%></a></div>
                                <div class="wrline change">
                                </div>
                            </div>
                            <div class="wbottombox">
                                <div class="wlb">
                                </div>
                                <div class="wrb">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <blockquote>
            &nbsp;</blockquote>
    </div>
    <form name="myForm" id="myForm" method="post" action="/TreatmentPlan/Create" onkeydown="if(event.keyCode==13){return false;}"
    style="display: none">
    <input type="hidden" id="patientID" name="patientID" value='<%: ViewData["patientID"]  %>' />
    <input type="hidden" id="ClusterID" name="ClusterID" value='<%: ViewData["ClusterID"]  %>' />
    <input type="submit" />
    </form>
    <input type="hidden" id="userId" name="userId" value='<%: Session["ClientID"]  %>' />
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server">
    <link type="text/css" href="/Content/style/TreatmentPlan/mood_auto.css" rel="stylesheet"
        rev="stylesheet" media="screen" />
    <script type="text/javascript" src="../../Scripts/TreatmentPlan/Back.js"></script>
    <script type="text/javascript" src="../../Scripts/TreatmentPlan/Cluster.js"></script>
    <script type="text/javascript" src="../../Scripts/TreatmentPlan/OpenDivWindow.js"></script>
    <script type="text/javascript" src="../../Scripts/TreatmentPlan/ProcessGuide.js"></script>
    <script type="text/javascript" src="../../Scripts/TreatmentPlan/ShowWindow.js"></script>
    <script type="text/javascript" src="../../Scripts/TreatmentPlan/TreatmentPlanUtil.js"></script>
    <script type="text/javascript">
        $(function () {
            popCurrentDiv('processGuide_11_white');
        });
        function init() {

            var divId = "processGuide_11_white";
            var url = "/FlowChart/ProcessGuide";
            var ext = "";
            ext = "divId=" + divId;
            url += "?time=" + new Date().getTime();
            // 发送请求
            $.ajax({
                type: "POST",
                url: url,
                cache: false,
                data: ext,
                timeout: 1000000,

                success: function (result) {
                    var yesId = "";
                    var noId = "";
                    $(result).find("yesId").each(function () {
                        //alert("yesId:"+$(this).text());
                        yesId = $(this).text();
                        yesId = idProcessor(yesId);
                        //alert("yesId==="+yesId);
                    });
                    $(result).find("noId").each(function () {
                        //alert("noId:"+$(this).text());
                        noId = $(this).text();
                        noId = idProcessor(noId);
                        //alert("noId==="+noId);
                    });
                    var yesIdWidth = $("#" + yesId).width();
                    var yesIdHeight = $("#" + yesId).height();
                    var noIdWidth = $("#" + noId).width();
                    var noIdHeight = $("#" + noId).height();
                    //red noId
                    var redNoIdContent = getRedContent(noIdHeight, noIdWidth, $("a[id = " + noId + "a]").parent().html());
                    //green yesId
                    var greenYesIdContent = getGreenContent(yesIdHeight, yesIdWidth, $("a[id = " + yesId + "a]").parent().html());


                    $("#" + yesId).html(greenYesIdContent);
                    $("#" + noId).html(redNoIdContent);
                },
                error: function (xmlHttpRequest, error) {
                    alertMessge("", "The request has timed out due to a network error! Please try again.");
                }
            });
        }
        init();

    </script>
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="phToolBar" runat="server">
    <input type="button" class="btn-style" value="Treatment Plan List" onclick="document.location = '/TreatmentPlan/TreatmentPlanList/1?patientID=<%:ViewData["patientID"] %>';" />
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="phNavigation" runat="server">
    <%:Html.ActionLink("Client list", "list","Client",null,null)%>
    >
    <%:Html.ActionLink(Html.Encode(Session["ClientName"]), "Info", "Client", new { id = ViewData["patientID"] },null)%>
    >
    <%:Html.ActionLink("Treatment Plan List", "TreatmentPlanList", "TreatmentPlan", new { id = 1,patientID=ViewData["patientID"]}, null)%>
    >
    <%:Html.ActionLink("Cluster", "Cluster", "FlowChart", new { patientID = ViewData["patientID"] }, null)%>
    > MOOD
</asp:Content>
<asp:Content ID="Content6" ContentPlaceHolderID="phfootBar" runat="server">
</asp:Content>
